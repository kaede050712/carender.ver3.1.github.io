<!DOCTYPE html>
<html lang="ja">
<head>

<meta charset='utf-8' />

<script src="locales-all.global.js"></script>
<link href="calendar.css" rel='stylesheet'>

<script src='https://cdn.jsdelivr.net/npm/fullcalendar@6.1.5/index.global.min.js'></script>
<script>id=0;</script>




<script>
const webStorage = function () {
  
  if (sessionStorage.getItem('visit')) {
    // ２回目以降のアクセス時の処理
    id=id;
    document.addEventListener('DOMContentLoaded', function() {
  var calendarEl = document.getElementById('calendar');
  var calendar = new FullCalendar.Calendar(calendarEl, {
    //list day weakをダス
    headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'
      },
    initialView: 'dayGridMonth',
    //日本語にする
    locale: "ja",
   
    navLinks: true, // can click day/week names to navigate views
     //土日の色付け
      businessHours: true, // display business hours
      editable: true,
       // 日付をクリック、または範囲を選択したイベント
    selectable: true,
    select: function (info) {
        //alert("selected " + info.startStr + " to " + info.endStr);

        // 入力ダイアログ
        const eventName = prompt("イベントを入力してください");
        
        if (eventName) {
            // イベントの追加
            calendar.addEvent({
                title: eventName,
                start: info.start,
                end: info.end,
                allDay: true,
            });
        }
    },
      //日を消す
    dayCellContent: function(arg){
		return arg.date.getDate();
	}
  
  });
  calendar.render();
 });
    $(".container").fadeIn(1000);
  } else {
    var rand = Math.floor(Math.random() * 1000000000000) + 1; //乱数を発生
    id =rand;
    // 初回アクセス時の処理
    document.addEventListener('DOMContentLoaded', function() {
  var calendarEl = document.getElementById('calendar');
  var calendar = new FullCalendar.Calendar(calendarEl, {
    //list day weakをダス
    headerToolbar: {
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,timeGridDay,listMonth'
      },
    initialView: 'dayGridMonth',
    //日本語にする
    locale: "ja",
   
    navLinks: true, // can click day/week names to navigate views
     //土日の色付け
      businessHours: true, // display business hours
      editable: true,
       // 日付をクリック、または範囲を選択したイベント
    selectable: true,
    select: function (info) {
        //alert("selected " + info.startStr + " to " + info.endStr);

        // 入力ダイアログ
        const eventName = prompt("イベントを入力してください");
        
        if (eventName) {
            // イベントの追加
            calendar.addEvent({
                title: eventName,
                start: info.start,
                end: info.end,
                allDay: true,
            });
        }
    },
      //日を消す
    dayCellContent: function(arg){
		return arg.date.getDate();
	}
  
  });
  calendar.render();
 });
    sessionStorage.setItem('visit', 'true'); // sessionStorageにデータを保存
    // 任意の実行処理
    
  }
}
webStorage(); 
</script>

<style>

  body {
    margin: 40px 10px;
    padding: 0;
    font-family: Arial, Helvetica Neue, Helvetica, sans-serif;
    font-size: 14px;
  }

  #calendar {
    max-width: 1100px;
    margin: 0 auto;
  }

</style>
</head>
<body>

  <div id='calendar'></div>

</body>
</html>
